import './polyfills.server.mjs';
import{a as z}from"./chunk-KOAK5NSM.mjs";import"./chunk-2AHKL2KG.mjs";import"./chunk-NRHZGHNS.mjs";import{a as _}from"./chunk-EW26AAKH.mjs";import{a as R}from"./chunk-RWYYDXAR.mjs";import{a as w,c as O,d as F,e as I,h as A,j as N,k as T,l as k,m as j,n as V,p as B,q as D,s as G}from"./chunk-C24D3ENG.mjs";import"./chunk-B6XIVWSG.mjs";import{m as h,p as y}from"./chunk-Z4BOVK5P.mjs";import{$a as g,$b as S,Fa as P,Ja as d,Q as u,Sa as s,Ta as f,Va as t,Wa as e,X as M,Xa as m,Y as x,_a as v,_b as E,ab as p,eb as n,gb as b,wa as l}from"./chunk-FJVNNCC4.mjs";import"./chunk-S6KH3LOX.mjs";function L(r,a){r&1&&(t(0,"span"),n(1,"El nombre es obligatorio."),e())}function U(r,a){r&1&&(t(0,"span"),n(1,"No puede ser solo espacios."),e())}function H(r,a){if(r&1&&(t(0,"div",38),d(1,L,2,0,"span",39)(2,U,2,0,"span",39),e()),r&2){let o,i,c=p();l(),s("ngIf",(o=c.estudianteForm.get("nombres"))==null||o.errors==null?null:o.errors.required),l(),s("ngIf",(i=c.estudianteForm.get("nombres"))==null||i.errors==null?null:i.errors.soloEspacios)}}function J(r,a){r&1&&(t(0,"span"),n(1,"El apellido es obligatorio."),e())}function K(r,a){r&1&&(t(0,"span"),n(1,"No puede ser solo espacios."),e())}function Q(r,a){if(r&1&&(t(0,"div",38),d(1,J,2,0,"span",39)(2,K,2,0,"span",39),e()),r&2){let o,i,c=p();l(),s("ngIf",(o=c.estudianteForm.get("apellidos"))==null||o.errors==null?null:o.errors.required),l(),s("ngIf",(i=c.estudianteForm.get("apellidos"))==null||i.errors==null?null:i.errors.soloEspacios)}}function W(r,a){r&1&&(t(0,"span"),n(1,"Debe ser un tel\xE9fono colombiano v\xE1lido."),e())}function X(r,a){if(r&1&&(t(0,"div",38),d(1,W,2,0,"span",39),e()),r&2){let o,i=p();l(),s("ngIf",(o=i.estudianteForm.get("telefono"))==null||o.errors==null?null:o.errors.pattern)}}function Y(r,a){if(r&1){let o=v();t(0,"app-alerts",40),g("cerrar",function(){M(o);let c=p();return x(c.onCerrarAlerta())}),e()}if(r&2){let o=p();s("mensaje",o.mensajeSuccess)("mensajeTitulo",o.tituloSuccess)("tipo",o.tipoAlerta)}}var q=class r{fb=u(D);estudianteService=u(z);route=u(h);router=u(y);estudianteForm;estudianteId;mensajeSuccess="";tituloSuccess="";tipoAlerta="success";cargando=!1;ngOnInit(){this.estudianteId=Number(this.route.snapshot.paramMap.get("id")),this.estudianteForm=this.fb.group({nombres:["",[O.required,_.noSoloEspacios]],apellidos:["",[O.required,_.noSoloEspacios]],direccion:[""],telefono:["",[_.telefonoColombiano]],ciudadOrigen:[""],ciudadResidencia:[""],sexo:[""],tipoSangre:[""]}),this.estudianteService.obtenerEstudiantes().subscribe(a=>{let o=a.find(i=>i.estudiante.id===this.estudianteId)?.estudiante;o&&this.estudianteForm.patchValue(o)})}isInvalid(a){let o=this.estudianteForm.get(a);return!!o&&o.invalid&&(o.dirty||o.touched)}onSubmit(){if(this.estudianteForm.invalid){this.estudianteForm.markAllAsTouched();return}this.cargando=!0,this.estudianteService.editarEstudiante(this.estudianteId,this.estudianteForm.value).subscribe({next:a=>{this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess=a.mensaje,this.cargando=!1},error:()=>{this.tipoAlerta="error",this.tituloSuccess="Error",this.mensajeSuccess="Error al modificar el estudiante",this.cargando=!1}})}onCancelar(){this.router.navigate(["/principal-web/estudiantes"])}onCerrarAlerta(){this.mensajeSuccess="",this.tituloSuccess="",this.estudianteForm.reset(),this.router.navigate(["/principal-web/estudiantes"])}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=P({type:r,selectors:[["app-editar-estudiante"]],decls:80,vars:13,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","nombres"],[1,"required"],["id","nombres","type","text","formControlName","nombres"],["class","error-messages",4,"ngIf"],["for","apellidos"],["id","apellidos","type","text","formControlName","apellidos"],["for","direccion"],["id","direccion","type","text","formControlName","direccion"],["for","telefono"],["id","telefono","type","text","formControlName","telefono","maxlength","10"],["for","ciudadOrigen"],["id","ciudadOrigen","type","text","formControlName","ciudadOrigen",1,"solo-lectura"],["for","ciudadResidencia"],["id","ciudadResidencia","type","text","formControlName","ciudadResidencia"],["for","sexo"],["id","sexo","formControlName","sexo"],["value",""],["value","Masculino"],["value","Femenino"],["value","Otro"],["for","tipoSangre"],["id","tipoSangre","formControlName","tipoSangre",1,"solo-lectura",3,"mousedown","keydown"],["value","O+"],["value","O-"],["value","A+"],["value","A-"],["value","B+"],["value","B-"],["value","AB+"],["value","AB-"],[1,"form-actions"],["type","button",1,"btn-cancelar",3,"click"],["type","submit",1,"btn-registrar",3,"disabled"],[3,"mensaje","mensajeTitulo","tipo","cerrar",4,"ngIf"],[1,"error-messages"],[4,"ngIf"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(o,i){o&1&&(t(0,"section")(1,"div",0)(2,"h2"),n(3,"Editar Estudiante"),e(),t(4,"form",1),g("ngSubmit",function(){return i.onSubmit()}),t(5,"div",2)(6,"div",3)(7,"label",4),n(8,"Nombres "),t(9,"span",5),n(10,"*"),e()(),m(11,"input",6),d(12,H,3,2,"div",7),e(),t(13,"div",3)(14,"label",8),n(15,"Apellidos "),t(16,"span",5),n(17,"*"),e()(),m(18,"input",9),d(19,Q,3,2,"div",7),e()(),t(20,"div",2)(21,"div",3)(22,"label",10),n(23,"Direcci\xF3n"),e(),m(24,"input",11),e(),t(25,"div",3)(26,"label",12),n(27,"Tel\xE9fono"),e(),m(28,"input",13),d(29,X,2,1,"div",7),e()(),t(30,"div",2)(31,"div",3)(32,"label",14),n(33,"Ciudad de Origen"),e(),m(34,"input",15),e(),t(35,"div",3)(36,"label",16),n(37,"Ciudad de Residencia"),e(),m(38,"input",17),e()(),t(39,"div",2)(40,"div",3)(41,"label",18),n(42,"Sexo"),e(),t(43,"select",19)(44,"option",20),n(45,"Seleccione"),e(),t(46,"option",21),n(47,"Masculino"),e(),t(48,"option",22),n(49,"Femenino"),e(),t(50,"option",23),n(51,"Otro"),e()()(),t(52,"div",3)(53,"label",24),n(54,"Tipo de sangre"),e(),t(55,"select",25),g("mousedown",function(C){return C.preventDefault()})("keydown",function(C){return C.preventDefault()}),t(56,"option",20),n(57,"Seleccione"),e(),t(58,"option",26),n(59,"O+"),e(),t(60,"option",27),n(61,"O-"),e(),t(62,"option",28),n(63,"A+"),e(),t(64,"option",29),n(65,"A-"),e(),t(66,"option",30),n(67,"B+"),e(),t(68,"option",31),n(69,"B-"),e(),t(70,"option",32),n(71,"AB+"),e(),t(72,"option",33),n(73,"AB-"),e()()()(),t(74,"div",34)(75,"button",35),g("click",function(){return i.onCancelar()}),n(76,"Cancelar"),e(),t(77,"button",36),n(78),e()()()()(),d(79,Y,1,3,"app-alerts",37)),o&2&&(l(4),s("formGroup",i.estudianteForm),l(7),f("invalid",i.isInvalid("nombres")),l(),s("ngIf",i.isInvalid("nombres")),l(6),f("invalid",i.isInvalid("apellidos")),l(),s("ngIf",i.isInvalid("apellidos")),l(9),f("invalid",i.isInvalid("telefono")),l(),s("ngIf",i.isInvalid("telefono")),l(48),s("disabled",i.estudianteForm.invalid||i.cargando),l(),b(" ",i.cargando?"Guardando...":"Guardar Cambios"," "),l(),s("ngIf",i.mensajeSuccess))},dependencies:[S,E,G,A,j,V,w,k,F,I,B,N,T,R],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:Arial,sans-serif;padding:1rem}.registro-container[_ngcontent-%COMP%]{padding:40px 30px;width:100%;max-width:600px}.registro-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:#000;text-align:center}.registro-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666}.registro-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #FFA21F;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;text-align:left;margin-bottom:5px;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:.9rem;transition:border .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffa21f}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1 1 100%}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#d62c1a}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]{background-color:#ffa21f;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]:hover{background-color:#eb8900}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;padding-left:1.2rem;position:relative}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";position:absolute;left:0}@media (max-width: 768px){.registro-container[_ngcontent-%COMP%]{padding:20px 15px}.registro-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.registro-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.registro-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.solo-lectura[_ngcontent-%COMP%]{background-color:#c5c5c5;color:#5e5e5e;pointer-events:none;border:1px solid #a8a8a8;opacity:.9;cursor:not-allowed;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:none}']})};export{q as EditarEstudianteComponent};
