import './polyfills.server.mjs';
import{a as U}from"./chunk-3VRA7NOZ.mjs";import{a as R}from"./chunk-J6FTL5KU.mjs";import"./chunk-2AHKL2KG.mjs";import"./chunk-NRHZGHNS.mjs";import{a as S}from"./chunk-EW26AAKH.mjs";import{a as G}from"./chunk-RWYYDXAR.mjs";import{a as $,c as f,d as V,e as j,h as z,j as H,k as q,l as L,m as Z,n as A,q as k,s as J}from"./chunk-C24D3ENG.mjs";import"./chunk-B6XIVWSG.mjs";import{p as w}from"./chunk-Z4BOVK5P.mjs";import{$a as b,$b as N,Fa as E,Ja as m,Q as _,Sa as c,Ta as g,Va as n,Wa as e,X as P,Xa as v,Y as I,Zb as T,_a as y,_b as D,ab as C,eb as r,fb as O,ib as F,wa as s}from"./chunk-FJVNNCC4.mjs";import"./chunk-S6KH3LOX.mjs";function B(o,a){o&1&&(n(0,"span"),r(1,"El nombre es obligatorio."),e())}function K(o,a){o&1&&(n(0,"span"),r(1,"No puede iniciar con espacios en blanco."),e())}function Q(o,a){if(o&1&&(n(0,"div",37),m(1,B,2,0,"span",38)(2,K,2,0,"span",38),e()),o&2){let t,i,l=C();s(),c("ngIf",(t=l.cursoForm.get("nombre"))==null||t.errors==null?null:t.errors.required),s(),c("ngIf",(i=l.cursoForm.get("nombre"))==null||i.errors==null?null:i.errors.soloEspacios)}}function W(o,a){o&1&&(n(0,"div",37)(1,"span"),r(2,"El tipo es obligatorio."),e()())}function X(o,a){if(o&1&&(n(0,"option",39),r(1),e()),o&2){let t=a.$implicit;c("value",t),s(),O(t)}}function ee(o,a){o&1&&(n(0,"div",37)(1,"span"),r(2,"La duraci\xF3n es obligatoria."),e()())}function te(o,a){o&1&&(n(0,"span"),r(1,"La fecha de inicio es obligatoria."),e())}function ne(o,a){o&1&&(n(0,"span"),r(1,"La fecha no puede ser anterior a hoy."),e())}function ie(o,a){if(o&1&&(n(0,"div",37),m(1,te,2,0,"span",38)(2,ne,2,0,"span",38),e()),o&2){let t,i,l=C();s(),c("ngIf",(t=l.cursoForm.get("fechaInicio"))==null||t.errors==null?null:t.errors.required),s(),c("ngIf",(i=l.cursoForm.get("fechaInicio"))==null||i.errors==null?null:i.errors.fechaPasada)}}function re(o,a){o&1&&(n(0,"div",37)(1,"span"),r(2,"La zona es obligatoria."),e()())}function oe(o,a){if(o&1&&(n(0,"option",39),r(1),e()),o&2){let t=a.$implicit;c("value",t),s(),O(t)}}function ae(o,a){o&1&&(n(0,"div",37)(1,"span"),r(2,"El horario es obligatorio."),e()())}function se(o,a){o&1&&(n(0,"span"),r(1,"La descripci\xF3n es obligatoria."),e())}function ce(o,a){o&1&&(n(0,"span"),r(1,"No puede iniciar con espacios en blanco."),e())}function le(o,a){if(o&1&&(n(0,"div",37),m(1,se,2,0,"span",38)(2,ce,2,0,"span",38),e()),o&2){let t,i,l=C();s(),c("ngIf",(t=l.cursoForm.get("descripcion"))==null||t.errors==null?null:t.errors.required),s(),c("ngIf",(i=l.cursoForm.get("descripcion"))==null||i.errors==null?null:i.errors.soloEspacios)}}function me(o,a){if(o&1&&(n(0,"option",39),r(1),e()),o&2){let t=a.$implicit;c("value",t.id),s(),F(" ",t.nombres," ",t.apellidos," (",t.cedula,") ")}}function pe(o,a){o&1&&(n(0,"div",37)(1,"span"),r(2,"Debe seleccionar un instructor."),e()())}function ue(o,a){if(o&1){let t=y();n(0,"app-alerts",40),b("cerrar",function(){P(t);let l=C();return I(l.onCerrarAlerta())}),e()}if(o&2){let t=C();c("mensaje",t.mensajeSuccess)("mensajeTitulo",t.tituloSuccess)("tipo","success")}}var Y=class o{cursoForm;cargando=!1;instructores=[];mensajeSuccess="";tituloSuccess="";tipoAlerta="success";horariosDisponibles=[];todosHorarios=[];fb=_(k);cursoService=_(R);router=_(w);usuarioService=_(U);ngOnInit(){this.cursoForm=this.fb.group({nombre:["",[f.required,S.noSoloEspacios]],descripcion:["",[f.required,S.noSoloEspacios]],instructorId:["",f.required],tipo:["",f.required],duracion:["",f.required],horarios:["",f.required],zonaImparticion:["",f.required],fechaInicio:["",[f.required,S.fechaNoPasada]]}),this.todosHorarios=[...this.generarHorarios(["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bados","Domingos"],{inicio:8,fin:20},2),...this.generarHorarios(["Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bados","Domingos"],{inicio:8,fin:19},3),...this.combinarDiasYHoras([["Lunes","Mi\xE9rcoles"],["Martes","Jueves"],["S\xE1bados","Domingos"],["Lunes","Viernes"],["Martes","S\xE1bados"],["Mi\xE9rcoles","Viernes"],["Jueves","Domingos"],["Lunes","Jueves"],["Martes","Viernes"],["Mi\xE9rcoles","S\xE1bados"]],{inicio:8,fin:20},2),...this.combinarDiasYHoras([["Lunes","Mi\xE9rcoles"],["Martes","Jueves"],["S\xE1bados","Domingos"],["Lunes","Viernes"],["Martes","S\xE1bados"],["Mi\xE9rcoles","Viernes"],["Jueves","Domingos"],["Lunes","Jueves"],["Martes","Viernes"],["Mi\xE9rcoles","S\xE1bados"]],{inicio:8,fin:19},3)],this.cargarInstructores(),this.cargarHorariosDisponibles()}generarHorarios(a,t,i){let l=[];for(let M of a)for(let d=t.inicio;d<=t.fin-i;d++){let p=d,u=d+i,h=`${p<12?p:p===12?12:p-12}${p<12?"am":"pm"}`,x=`${u<12?u:u===12?12:u-12}${u<12?"am":"pm"}`;l.push(`${M} ${h} - ${x}`)}return l}combinarDiasYHoras(a,t,i){let l=[];for(let M of a)for(let d=t.inicio;d<=t.fin-i;d++){let p=d,u=d+i,h=`${p<12?p:p===12?12:p-12}${p<12?"am":"pm"}`,x=`${u<12?u:u===12?12:u-12}${u<12?"am":"pm"}`;l.push(`${M.join(" y ")} ${h} - ${x}`)}return l}cargarInstructores(){this.usuarioService.obtenerUsuarios().subscribe({next:a=>{this.instructores=a.filter(t=>t.rol==="Instructor")},error:()=>{this.instructores=[]}})}cargarHorariosDisponibles(){this.cursoService.obtenerCursos().subscribe({next:a=>{let t=a.map(i=>i.horarios);this.horariosDisponibles=this.todosHorarios.filter(i=>!t.includes(i))},error:()=>{this.horariosDisponibles=this.todosHorarios}})}isInvalid(a){let t=this.cursoForm.get(a);return!!t&&t.invalid&&(t.dirty||t.touched)}getDuraciones(){return Array.from({length:15},(a,t)=>`${t+1} mes${t===0?"":"es"}`)}onSubmit(){if(this.cursoForm.invalid){this.cursoForm.markAllAsTouched();return}this.cargando=!0;let a=this.cursoForm.value;this.cursoService.crearCurso(a).subscribe({next:t=>{this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess=t.mensaje,this.cargando=!1,this.cargarHorariosDisponibles()},error:()=>{this.tipoAlerta="error",this.tituloSuccess="Error",this.mensajeSuccess="Error al crear el curso",this.cargando=!1}})}cancelar(){this.router.navigate(["/principal-web/cursos"])}onCerrarAlerta(){this.mensajeSuccess="",this.tituloSuccess="",this.cursoForm.reset(),this.router.navigate(["/principal-web/cursos"])}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-crear-curso"]],decls:101,vars:30,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","nombre"],[1,"required"],["id","nombre","type","text","formControlName","nombre"],["class","error-messages",4,"ngIf"],["for","tipo"],["id","tipo","formControlName","tipo"],["value",""],["value","Presencial"],["value","Virtual"],["for","duracion"],["id","duracion","formControlName","duracion"],[3,"value",4,"ngFor","ngForOf"],["for","fechaInicio"],["id","fechaInicio","type","date","formControlName","fechaInicio"],["for","zonaImparticion"],["id","zonaImparticion","formControlName","zonaImparticion"],["value","Zona Norte"],["value","Zona Centro"],["value","Zona Sur"],["value","Zona Este"],["value","Zona Oeste"],["value","Zona Rural"],["for","horarios"],["id","horarios","formControlName","horarios"],[1,"form-group","full-width"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3"],["for","instructorId"],["id","instructorId","formControlName","instructorId"],[1,"form-actions"],["type","button",1,"btn-cancelar",3,"click"],["type","submit",1,"btn-registrar",3,"disabled"],[3,"mensaje","mensajeTitulo","tipo","cerrar",4,"ngIf"],[1,"error-messages"],[4,"ngIf"],[3,"value"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(t,i){t&1&&(n(0,"section")(1,"div",0)(2,"h2"),r(3,"Crear Curso"),e(),n(4,"form",1),b("ngSubmit",function(){return i.onSubmit()}),n(5,"div",2)(6,"div",3)(7,"label",4),r(8,"Nombre del curso "),n(9,"span",5),r(10,"*"),e()(),v(11,"input",6),m(12,Q,3,2,"div",7),e(),n(13,"div",3)(14,"label",8),r(15,"Tipo "),n(16,"span",5),r(17,"*"),e()(),n(18,"select",9)(19,"option",10),r(20,"Seleccione"),e(),n(21,"option",11),r(22,"Presencial"),e(),n(23,"option",12),r(24,"Virtual"),e()(),m(25,W,3,0,"div",7),e()(),n(26,"div",2)(27,"div",3)(28,"label",13),r(29,"Duraci\xF3n "),n(30,"span",5),r(31,"*"),e()(),n(32,"select",14)(33,"option",10),r(34,"Seleccione duraci\xF3n"),e(),m(35,X,2,2,"option",15),e(),m(36,ee,3,0,"div",7),e(),n(37,"div",3)(38,"label",16),r(39,"Fecha de inicio "),n(40,"span",5),r(41,"*"),e()(),v(42,"input",17),m(43,ie,3,2,"div",7),e()(),n(44,"div",2)(45,"div",3)(46,"label",18),r(47,"Zona de impartici\xF3n "),n(48,"span",5),r(49,"*"),e()(),n(50,"select",19)(51,"option",10),r(52,"Seleccione una zona"),e(),n(53,"option",20),r(54,"Zona Norte"),e(),n(55,"option",21),r(56,"Zona Centro"),e(),n(57,"option",22),r(58,"Zona Sur"),e(),n(59,"option",23),r(60,"Zona Este"),e(),n(61,"option",24),r(62,"Zona Oeste"),e(),n(63,"option",25),r(64,"Zona Rural"),e()(),m(65,re,3,0,"div",7),e(),n(66,"div",3)(67,"label",26),r(68,"Horarios "),n(69,"span",5),r(70,"*"),e()(),n(71,"select",27)(72,"option",10),r(73,"Seleccione un horario"),e(),m(74,oe,2,2,"option",15),e(),m(75,ae,3,0,"div",7),e()(),n(76,"div",2)(77,"div",28)(78,"label",29),r(79,"Descripci\xF3n "),n(80,"span",5),r(81,"*"),e()(),v(82,"textarea",30),m(83,le,3,2,"div",7),e()(),n(84,"div",2)(85,"div",28)(86,"label",31),r(87,"Instructor "),n(88,"span",5),r(89,"*"),e()(),n(90,"select",32)(91,"option",10),r(92,"Seleccione un instructor"),e(),m(93,me,2,4,"option",15),e(),m(94,pe,3,0,"div",7),e()(),n(95,"div",33)(96,"button",34),b("click",function(){return i.cancelar()}),r(97,"Cancelar"),e(),n(98,"button",35),r(99," Crear Curso "),e()()()()(),m(100,ue,1,3,"app-alerts",36)),t&2&&(s(4),c("formGroup",i.cursoForm),s(7),g("invalid",i.isInvalid("nombre")),s(),c("ngIf",i.isInvalid("nombre")),s(6),g("invalid",i.isInvalid("tipo")),s(7),c("ngIf",i.isInvalid("tipo")),s(7),g("invalid",i.isInvalid("duracion")),s(3),c("ngForOf",i.getDuraciones()),s(),c("ngIf",i.isInvalid("duracion")),s(6),g("invalid",i.isInvalid("fechaInicio")),s(),c("ngIf",i.isInvalid("fechaInicio")),s(7),g("invalid",i.isInvalid("zonaImparticion")),s(15),c("ngIf",i.isInvalid("zonaImparticion")),s(6),g("invalid",i.isInvalid("horarios")),s(3),c("ngForOf",i.horariosDisponibles),s(),c("ngIf",i.isInvalid("horarios")),s(7),g("invalid",i.isInvalid("descripcion")),s(),c("ngIf",i.isInvalid("descripcion")),s(7),g("invalid",i.isInvalid("instructorId")),s(3),c("ngForOf",i.instructores),s(),c("ngIf",i.isInvalid("instructorId")),s(4),c("disabled",i.cursoForm.invalid||i.cargando),s(2),c("ngIf",i.mensajeSuccess))},dependencies:[N,T,D,J,z,Z,A,$,L,V,j,H,q,G],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:Arial,sans-serif;padding:1rem}.registro-container[_ngcontent-%COMP%]{padding:40px 30px;width:100%;max-width:600px}.registro-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:#000;text-align:center}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;text-align:left;margin-bottom:5px;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:.9rem;transition:border .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1 1 100%}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]:hover{background-color:#d62c1a}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]{background-color:#ffa21f;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]:hover{background-color:#eb8900}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-registrar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;padding-left:1.2rem;position:relative}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";position:absolute;left:0}']})};export{Y as CrearCursoComponent};
