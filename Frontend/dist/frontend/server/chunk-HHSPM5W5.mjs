import './polyfills.server.mjs';
import{a as D}from"./chunk-3VRA7NOZ.mjs";import"./chunk-NRHZGHNS.mjs";import{a as C}from"./chunk-EW26AAKH.mjs";import{a as B}from"./chunk-RWYYDXAR.mjs";import{a as y,c as _,d as I,e as F,h as w,j as N,k as U,l as T,m as A,n as j,p as k,q as V,s as q}from"./chunk-C24D3ENG.mjs";import"./chunk-B6XIVWSG.mjs";import{m as P,p as h}from"./chunk-Z4BOVK5P.mjs";import{$a as f,$b as S,Fa as E,Ja as m,Q as g,Sa as s,Ta as d,Va as t,Wa as e,X as x,Xa as p,Y as b,_a as O,_b as M,ab as u,eb as n,wa as l}from"./chunk-FJVNNCC4.mjs";import"./chunk-S6KH3LOX.mjs";function G(i,a){i&1&&(t(0,"span"),n(1,"El nombre es obligatorio."),e())}function R(i,a){i&1&&(t(0,"span"),n(1,"No puede ser solo espacios."),e())}function L(i,a){if(i&1&&(t(0,"div",42),m(1,G,2,0,"span",43)(2,R,2,0,"span",43),e()),i&2){let o,r,c=u();l(),s("ngIf",(o=c.usuarioForm.get("nombres"))==null||o.errors==null?null:o.errors.required),l(),s("ngIf",(r=c.usuarioForm.get("nombres"))==null||r.errors==null?null:r.errors.soloEspacios)}}function H(i,a){i&1&&(t(0,"span"),n(1,"El apellido es obligatorio."),e())}function J(i,a){i&1&&(t(0,"span"),n(1,"No puede ser solo espacios."),e())}function K(i,a){if(i&1&&(t(0,"div",42),m(1,H,2,0,"span",43)(2,J,2,0,"span",43),e()),i&2){let o,r,c=u();l(),s("ngIf",(o=c.usuarioForm.get("apellidos"))==null||o.errors==null?null:o.errors.required),l(),s("ngIf",(r=c.usuarioForm.get("apellidos"))==null||r.errors==null?null:r.errors.soloEspacios)}}function Q(i,a){i&1&&(t(0,"span"),n(1,"El correo es obligatorio."),e())}function W(i,a){i&1&&(t(0,"span"),n(1,"Correo inv\xE1lido."),e())}function X(i,a){if(i&1&&(t(0,"div",42),m(1,Q,2,0,"span",43)(2,W,2,0,"span",43),e()),i&2){let o,r,c=u();l(),s("ngIf",(o=c.usuarioForm.get("correoElectronico"))==null||o.errors==null?null:o.errors.required),l(),s("ngIf",(r=c.usuarioForm.get("correoElectronico"))==null||r.errors==null?null:r.errors.correoInvalido)}}function Y(i,a){i&1&&(t(0,"div",42)(1,"span"),n(2,"El rol es obligatorio."),e()())}function Z(i,a){i&1&&(t(0,"span"),n(1,"Debe ser un tel\xE9fono colombiano v\xE1lido."),e())}function $(i,a){if(i&1&&(t(0,"div",42),m(1,Z,2,0,"span",43),e()),i&2){let o,r=u();l(),s("ngIf",(o=r.usuarioForm.get("telefono"))==null||o.errors==null?null:o.errors.pattern)}}function ee(i,a){if(i&1){let o=O();t(0,"app-alerts",44),f("cerrar",function(){x(o);let c=u();return b(c.onCerrarAlerta())}),e()}if(i&2){let o=u();s("mensaje",o.mensajeSuccess)("mensajeTitulo",o.tituloSuccess)("tipo",o.tipoAlerta)}}var z=class i{fb=g(V);usuarioService=g(D);route=g(P);router=g(h);usuarioForm;usuarioId;mensajeSuccess="";tituloSuccess="";tipoAlerta="success";cargando=!1;ngOnInit(){this.usuarioId=Number(this.route.snapshot.paramMap.get("id")),this.usuarioForm=this.fb.group({nombres:["",[_.required,C.noSoloEspacios]],apellidos:["",[_.required,C.noSoloEspacios]],correoElectronico:["",[_.required,C.correoPersonalizado]],rol:["",[_.required]],fechaNacimiento:[""],direccion:[""],telefono:["",[C.telefonoColombiano]],sexo:[""],tipoSangre:[""]}),this.usuarioService.obtenerUsuarios().subscribe(a=>{let o=a.find(r=>r.id===this.usuarioId);o&&this.usuarioForm.patchValue(o)})}onSubmit(){this.usuarioForm.invalid||(this.cargando=!0,this.usuarioService.editarUsuario(this.usuarioId,this.usuarioForm.value).subscribe({next:a=>{this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess=a.mensaje,this.cargando=!1},error:a=>{this.tipoAlerta="error",this.tituloSuccess="Error",this.mensajeSuccess="Error al modificar el usuario",this.cargando=!1}}))}onCancelar(){this.router.navigate(["/principal-web/usuarios"])}onCerrarAlerta(){this.mensajeSuccess="",this.tituloSuccess="",this.usuarioForm.reset(),this.router.navigate(["/principal-web/usuarios"])}isInvalid(a){let o=this.usuarioForm.get(a);return!!o&&o.invalid&&(o.dirty||o.touched)}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=E({type:i,selectors:[["app-editar-usuario"]],decls:96,vars:18,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","nombres"],[1,"required"],["id","nombres","type","text","formControlName","nombres"],["class","error-messages",4,"ngIf"],["for","apellidos"],["id","apellidos","type","text","formControlName","apellidos"],["for","correoElectronico"],["id","correoElectronico","type","email","formControlName","correoElectronico"],["for","rol"],["id","rol","formControlName","rol"],["value",""],["value","Coordinador"],["value","Instructor"],["for","fechaNacimiento"],["id","fechaNacimiento","type","date","formControlName","fechaNacimiento","readonly","",1,"solo-lectura"],["for","telefono"],["id","telefono","type","text","formControlName","telefono","maxlength","10"],["for","direccion"],["id","direccion","type","text","formControlName","direccion"],["for","sexo"],["id","sexo","formControlName","sexo"],["value","Masculino"],["value","Femenino"],["value","Otro"],["for","tipoSangre"],["id","tipoSangre","formControlName","tipoSangre",1,"solo-lectura",3,"mousedown","keydown"],["value","O+"],["value","O-"],["value","A+"],["value","A-"],["value","B+"],["value","B-"],["value","AB+"],["value","AB-"],[1,"form-actions"],["type","button",3,"click"],["type","submit",3,"disabled"],[3,"mensaje","mensajeTitulo","tipo","cerrar",4,"ngIf"],[1,"error-messages"],[4,"ngIf"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(o,r){o&1&&(t(0,"section")(1,"div",0)(2,"h2"),n(3,"Editar Usuario"),e(),t(4,"form",1),f("ngSubmit",function(){return r.onSubmit()}),t(5,"div",2)(6,"div",3)(7,"label",4),n(8,"Nombres "),t(9,"span",5),n(10,"*"),e()(),p(11,"input",6),m(12,L,3,2,"div",7),e(),t(13,"div",3)(14,"label",8),n(15,"Apellidos "),t(16,"span",5),n(17,"*"),e()(),p(18,"input",9),m(19,K,3,2,"div",7),e()(),t(20,"div",2)(21,"div",3)(22,"label",10),n(23,"Correo electr\xF3nico "),t(24,"span",5),n(25,"*"),e()(),p(26,"input",11),m(27,X,3,2,"div",7),e(),t(28,"div",3)(29,"label",12),n(30,"Rol "),t(31,"span",5),n(32,"*"),e()(),t(33,"select",13)(34,"option",14),n(35,"Seleccione un rol"),e(),t(36,"option",15),n(37,"Coordinador"),e(),t(38,"option",16),n(39,"Instructor"),e()(),m(40,Y,3,0,"div",7),e()(),t(41,"div",2)(42,"div",3)(43,"label",17),n(44,"Fecha de nacimiento"),e(),p(45,"input",18),e(),t(46,"div",3)(47,"label",19),n(48,"Tel\xE9fono"),e(),p(49,"input",20),m(50,$,2,1,"div",7),e()(),t(51,"div",2)(52,"div",3)(53,"label",21),n(54,"Direcci\xF3n"),e(),p(55,"input",22),e(),t(56,"div",3)(57,"label",23),n(58,"Sexo"),e(),t(59,"select",24)(60,"option",14),n(61,"Seleccione"),e(),t(62,"option",25),n(63,"Masculino"),e(),t(64,"option",26),n(65,"Femenino"),e(),t(66,"option",27),n(67,"Otro"),e()()(),t(68,"div",3)(69,"label",28),n(70,"Tipo de sangre"),e(),t(71,"select",29),f("mousedown",function(v){return v.preventDefault()})("keydown",function(v){return v.preventDefault()}),t(72,"option",14),n(73,"Seleccione"),e(),t(74,"option",30),n(75,"O+"),e(),t(76,"option",31),n(77,"O-"),e(),t(78,"option",32),n(79,"A+"),e(),t(80,"option",33),n(81,"A-"),e(),t(82,"option",34),n(83,"B+"),e(),t(84,"option",35),n(85,"B-"),e(),t(86,"option",36),n(87,"AB+"),e(),t(88,"option",37),n(89,"AB-"),e()()()(),t(90,"div",38)(91,"button",39),f("click",function(){return r.onCancelar()}),n(92,"Cancelar"),e(),t(93,"button",40),n(94,"Guardar Cambios"),e()()()()(),m(95,ee,1,3,"app-alerts",41)),o&2&&(l(4),s("formGroup",r.usuarioForm),l(7),d("invalid",r.isInvalid("nombres")),l(),s("ngIf",r.isInvalid("nombres")),l(6),d("invalid",r.isInvalid("apellidos")),l(),s("ngIf",r.isInvalid("apellidos")),l(7),d("invalid",r.isInvalid("correoElectronico")),l(),s("ngIf",r.isInvalid("correoElectronico")),l(6),d("invalid",r.isInvalid("rol")),l(7),s("ngIf",r.isInvalid("rol")),l(9),d("invalid",r.isInvalid("telefono")),l(),s("ngIf",r.isInvalid("telefono")),l(43),s("disabled",r.usuarioForm.invalid||r.cargando),l(2),s("ngIf",r.mensajeSuccess))},dependencies:[S,M,q,w,A,j,y,T,I,F,k,N,U,B],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:Arial,sans-serif;padding:1rem}.registro-container[_ngcontent-%COMP%]{padding:40px 30px;width:100%;max-width:600px}.registro-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:#000;text-align:center}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;text-align:left;margin-bottom:5px;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:.9rem;transition:border .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1 1 100%}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#ffa21f;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#eb8900}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#d32f2f}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;padding-left:1.2rem;position:relative}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";position:absolute;left:0}.solo-lectura[_ngcontent-%COMP%]{background-color:#c5c5c5;color:#5e5e5e;pointer-events:none;border:1px solid #a8a8a8;opacity:.9;cursor:not-allowed;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:none}']})};export{z as EditarUsuarioComponent};
