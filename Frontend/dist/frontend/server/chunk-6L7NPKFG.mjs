import './polyfills.server.mjs';
import{a as E}from"./chunk-NRHZGHNS.mjs";import{a as j}from"./chunk-RWYYDXAR.mjs";import"./chunk-B6XIVWSG.mjs";import{a as k,b as y}from"./chunk-Z4BOVK5P.mjs";import{$a as _,$b as S,Fa as h,Ja as f,K as P,Q as d,Sa as s,Va as r,Wa as i,X as u,Xa as p,Y as b,Z as m,_a as w,_b as v,ab as C,eb as l,gb as x,k as M,v as O,wa as a}from"./chunk-FJVNNCC4.mjs";import"./chunk-S6KH3LOX.mjs";var g=class t{http=d(y);getHeaderService=d(E);baseUrl="http://localhost:8080/api/lucyTejada";obtenerReporteGeneral(){let n=new k({Authorization:this.getHeaderService.getHeaders().get("Authorization")||""});return this.http.get(`${this.baseUrl}/reporte-general`,{headers:n,responseType:"blob"}).pipe(O(e=>(console.error("Error al obtener reporte:",e),M(()=>e))))}descargarArchivo(n,e="reporte-general.xlsx"){let o=window.URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};function I(t,n){t&1&&(m(),r(0,"svg",14),p(1,"path",15),i())}function T(t,n){t&1&&(r(0,"div",16),p(1,"div",17),i())}function z(t,n){if(t&1){let e=w();r(0,"app-alerts",18),_("cerrar",function(){u(e);let c=C();return b(c.cerrarAlerta())}),i()}if(t&2){let e=C();s("mensaje",e.mensajeSuccess)("mensajeTitulo",e.tituloSuccess)("tipo",e.tipoAlerta)}}var R=class t{reporteService=d(g);descargando=!1;mensajeSuccess=null;tituloSuccess="";tipoAlerta="error";descargarReporteGeneral(){this.descargando||(this.descargando=!0,this.mensajeSuccess=null,this.reporteService.obtenerReporteGeneral().subscribe({next:n=>{try{let o=`reporte-general-${new Date().toISOString().split("T")[0]}.xlsx`;this.reporteService.descargarArchivo(n,o),this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess="Reporte descargado correctamente."}catch(e){console.error("Error al procesar descarga:",e),this.tipoAlerta="error",this.tituloSuccess="Error",this.mensajeSuccess="Error al procesar la descarga del archivo."}finally{this.descargando=!1}},error:n=>{console.error("Error al descargar reporte:",n),this.descargando=!1,this.tipoAlerta="error",this.tituloSuccess="Error",n.status===401?this.mensajeSuccess="No tiene permisos para descargar el reporte.":n.status===404?this.mensajeSuccess="Reporte no encontrado.":n.status===500?this.mensajeSuccess="Error interno del servidor. Intente m\xE1s tarde.":this.mensajeSuccess="Error al descargar el reporte. Verifique su conexi\xF3n."}}))}cerrarAlerta(){this.mensajeSuccess=null}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-reportes"]],decls:17,vars:5,consts:[[1,"reportes-container"],[1,"reportes-content"],[1,"reportes-title"],[1,"download-section"],["type","button",1,"btn-download",3,"click","disabled"],[1,"btn-content"],["class","download-icon","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"btn-text"],[1,"info-section"],[1,"info-text"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[3,"mensaje","mensajeTitulo","tipo","cerrar",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"download-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"spinner"],[1,"spinner-circle"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(e,o){e&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),l(3,"Generar Reportes"),i(),r(4,"div",3)(5,"button",4),_("click",function(){return o.descargarReporteGeneral()}),r(6,"div",5),f(7,I,2,0,"svg",6)(8,T,2,0,"div",7),r(9,"span",8),l(10),i()()()(),r(11,"div",9)(12,"p",10),m(),r(13,"svg",11),p(14,"path",12),i(),l(15," El reporte se descargar\xE1 en formato Excel (.xlsx) con la informaci\xF3n general del sistema. "),i()()(),f(16,z,1,3,"app-alerts",13),i()),e&2&&(a(5),s("disabled",o.descargando),a(2),s("ngIf",!o.descargando),a(),s("ngIf",o.descargando),a(2),x(" ",o.descargando?"Descargando...":"Descargar Reporte General"," "),a(6),s("ngIf",o.mensajeSuccess))},dependencies:[S,v,j],styles:['.reportes-container[_ngcontent-%COMP%]{min-height:60vh;background:#82c0cc;padding:2rem;display:flex;flex-direction:column;align-items:center}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]{background:#82c0cc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:3rem;max-width:600px;width:100%}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .reportes-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;text-align:center;margin-bottom:2.5rem;color:#333;text-shadow:0 2px 4px rgba(0,0,0,.3)}@media (max-width: 768px){.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .reportes-title[_ngcontent-%COMP%]{font-size:2rem}}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffa21f,#ff9706);color:#fff;border:none;border-radius:12px;padding:1rem 2rem;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 20px #ffa21f4d;min-width:280px;position:relative;overflow:hidden}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#eb8900,#d27b00);transform:translateY(-2px);box-shadow:0 12px 25px #ffa21f66}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:hover:before{left:100%}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:active{transform:translateY(0);background:linear-gradient(135deg,#d27b00,#b86c00)}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:disabled{background:#82c0cc4d;color:#fff9;cursor:not-allowed;transform:none;box-shadow:0 4px 10px #0000001a}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]:disabled:before{display:none}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .download-icon[_ngcontent-%COMP%]{width:24px;height:24px;stroke-width:2.5}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .spinner-circle[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid rgba(255,255,255,.3);border-top:3px solid #ffffff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;background:#16697a;padding:1.25rem;border-radius:10px;color:#82c0cc;font-size:.95rem;line-height:1.6;border-left:4px solid #FFA21F;margin:0}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0;margin-top:2px;stroke:#ffa21f;stroke-width:2}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.reportes-container[_ngcontent-%COMP%]{padding:1.5rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]{padding:2rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .download-section[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]{min-width:100%;padding:1.25rem 1.5rem}}@media (max-width: 480px){.reportes-container[_ngcontent-%COMP%]{padding:1rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .reportes-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:2rem}.reportes-container[_ngcontent-%COMP%]   .reportes-content[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:.9rem;padding:1rem}}']})};export{R as ReportesComponent};
