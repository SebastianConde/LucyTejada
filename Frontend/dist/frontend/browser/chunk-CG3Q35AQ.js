import{a as R}from"./chunk-S4FW5EPH.js";import{a as D}from"./chunk-2BIVZGSJ.js";import{a as y,b as d,c as T,d as k,e as b,g as q,i as N,j,n as I,p as z,r as A}from"./chunk-XOECQB7D.js";import{a as V}from"./chunk-UYWN3LPP.js";import{h as w,i as E,l as L}from"./chunk-VTUWB4KY.js";import{$a as a,Ca as h,Ga as g,Na as u,Oa as v,Pa as c,Qa as o,Ra as i,S as C,Sa as x,Va as F,Wa as M,Xa as _,Y as P,Z as O,ib as S,ta as r}from"./chunk-UYD3PI4J.js";var G=()=>["/recuperar-password"];function U(e,s){e&1&&(o(0,"span"),a(1,"El correo electr\xF3nico es obligatorio."),i())}function W(e,s){e&1&&(o(0,"span"),a(1,"El correo no tiene un formato permitido."),i())}function Z(e,s){if(e&1&&(o(0,"div",7),g(1,U,2,0,"span")(2,W,2,0,"span"),i()),e&2){let t,n,l=_();r(),c(!((t=l.loginForm.get("email"))==null||t.errors==null)&&t.errors.required?1:-1),r(),c(!((n=l.loginForm.get("email"))==null||n.errors==null)&&n.errors.correoInvalido?2:-1)}}function $(e,s){e&1&&(o(0,"span"),a(1,"La contrase\xF1a es obligatoria."),i())}function H(e,s){e&1&&(o(0,"span"),a(1,"Debe tener al menos 6 caracteres."),i())}function J(e,s){e&1&&(o(0,"span"),a(1,"No puede tener m\xE1s de 20 caracteres."),i())}function K(e,s){e&1&&(o(0,"span"),a(1,"Debe incluir may\xFAsculas, min\xFAsculas, un n\xFAmero y un car\xE1cter especial."),i())}function Q(e,s){if(e&1&&(o(0,"div",7),g(1,$,2,0,"span")(2,H,2,0,"span")(3,J,2,0,"span")(4,K,2,0,"span"),i()),e&2){let t,n,l,p,m=_();r(),c(!((t=m.loginForm.get("password"))==null||t.errors==null)&&t.errors.required?1:-1),r(),c(!((n=m.loginForm.get("password"))==null||n.errors==null)&&n.errors.minlength?2:-1),r(),c(!((l=m.loginForm.get("password"))==null||l.errors==null)&&l.errors.maxlength?3:-1),r(),c(!((p=m.loginForm.get("password"))==null||p.errors==null)&&p.errors.pattern?4:-1)}}function X(e,s){if(e&1){let t=F();o(0,"app-alerts",13),M("cerrar",function(){P(t);let l=_();return O(l.errorMessage=null)}),i()}if(e&2){let t=_();u("mensaje",t.errorMessage)("mensajeTitulo",t.tituloError)("tipo","error")}}var B=class e{formBuilder=C(z);router=C(w);loginService=C(V);errorMessage=null;tituloError="";loginForm=this.formBuilder.group({email:new b("",[d.required,R.correoPersonalizado]),password:new b("",[d.required,d.minLength(6),d.maxLength(20),d.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).+$/)])});onSubmit(){if(this.loginForm.valid){let s={username:this.loginForm.value.email,password:this.loginForm.value.password};this.loginService.login(s).subscribe({next:t=>{this.loginService.setToken(t.token),console.log("Sesi\xF3n iniciada con \xE9xito"),this.loginService.getPrimerInicio()?this.router.navigate(["/completar-registro"]):this.router.navigate(["/principal-web"])},error:t=>{this.errorMessage="No pudimos iniciar tu sesi\xF3n. Aseg\xFArate de que tu correo y contrase\xF1a sean correctos.",this.tituloError="Error al iniciar sesi\xF3n",console.error("Error al iniciar sesi\xF3n:",t)}})}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-login"]],decls:24,vars:11,consts:[[1,"login-container"],[1,"circle"],["src","/assets/icons/loginIcon.svg","alt","Login Icon"],[3,"ngSubmit","formGroup"],["for","email"],[1,"required"],["formControlName","email","placeholder","ejemplo@correo.com","type","email","id","email","required",""],[1,"error-messages"],["for","password"],["formControlName","password","placeholder","Entre su contrase\xF1a","type","password","id","password","required",""],["type","submit",3,"disabled"],[3,"routerLink"],[3,"mensaje","mensajeTitulo","tipo"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(t,n){if(t&1&&(o(0,"section")(1,"div",0)(2,"div",1),x(3,"img",2),i(),o(4,"h2"),a(5,"Inicia sesi\xF3n"),i(),o(6,"form",3),M("ngSubmit",function(){return n.onSubmit()}),o(7,"label",4),a(8,"Correo electr\xF3nico "),o(9,"span",5),a(10,"*"),i()(),x(11,"input",6),g(12,Z,3,2,"div",7),o(13,"label",8),a(14,"Contrase\xF1a "),o(15,"span",5),a(16,"*"),i()(),x(17,"input",9),g(18,Q,5,4,"div",7),o(19,"button",10),a(20,"Ingresar"),i(),o(21,"a",11),a(22,"\xBFOlvidaste tu contrase\xF1a?"),i()()()(),g(23,X,1,3,"app-alerts",12)),t&2){let l,p,m,f;r(6),u("formGroup",n.loginForm),r(5),v("invalid",((l=n.loginForm.get("email"))==null?null:l.touched)&&((l=n.loginForm.get("email"))==null?null:l.invalid)),r(),c((p=n.loginForm.get("email"))!=null&&p.touched&&((p=n.loginForm.get("email"))!=null&&p.invalid)?12:-1),r(5),v("invalid",((m=n.loginForm.get("password"))==null?null:m.touched)&&((m=n.loginForm.get("password"))==null?null:m.invalid)),r(),c((f=n.loginForm.get("password"))!=null&&f.touched&&((f=n.loginForm.get("password"))!=null&&f.invalid)?18:-1),r(),u("disabled",n.loginForm.invalid),r(2),u("routerLink",S(10,G)),r(2),c(n.errorMessage?23:-1)}},dependencies:[A,q,y,T,k,I,N,j,L,E,D],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#16697a;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}.login-container[_ngcontent-%COMP%]{background:#82c0cc;padding:60px 30px 40px;border-radius:10px;box-shadow:0 4px 12px #0000001a;width:320px;text-align:center;position:relative}.login-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#ffa21f;border-radius:50%;position:absolute;top:-30px;left:50%;transform:translate(-50%);border:3px solid #82C0CC;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5em;color:#000}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left;font-size:14px;margin-top:10px;margin-bottom:5px;color:#000}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:10px;font-size:14px;transition:border .3s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#e74c3c;outline:none}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#ffa21f;color:#000;border:none;border-radius:20px;cursor:pointer;margin-top:10px;font-weight:700;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eb8900}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;color:#000;text-decoration:none}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;padding-left:1.2rem;position:relative}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";position:absolute;left:0}']})};export{B as LoginComponent};
