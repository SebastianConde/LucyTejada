import{a as U}from"./chunk-ONSHOBVK.js";import{a as B}from"./chunk-S4FW5EPH.js";import{a as G}from"./chunk-2BIVZGSJ.js";import{a as j,b as g,c as w,d as V,g as k,i as q,j as A,n as N,p as D,r as L}from"./chunk-XOECQB7D.js";import{f as R,h as E,i as I,l as T}from"./chunk-VTUWB4KY.js";import{$a as l,Ca as h,Db as S,Eb as y,Ga as p,Na as s,Oa as v,Pa as P,Qa as r,Ra as o,S as _,Sa as C,Va as z,Wa as x,Xa as d,Y as b,Z as M,ab as O,ib as F,ta as i}from"./chunk-UYD3PI4J.js";var Z=()=>["/login"];function $(n,c){n&1&&(r(0,"span"),l(1,"La contrase\xF1a es obligatoria"),o())}function H(n,c){n&1&&(r(0,"span"),l(1,"M\xEDnimo 6 caracteres"),o())}function J(n,c){n&1&&(r(0,"span"),l(1,"M\xE1ximo 20 caracteres"),o())}function K(n,c){n&1&&(r(0,"span"),l(1," Debe contener may\xFAscula, min\xFAscula, n\xFAmero y car\xE1cter especial "),o())}function Q(n,c){if(n&1&&(r(0,"div",14),p(1,$,2,0,"span",15)(2,H,2,0,"span",15)(3,J,2,0,"span",15)(4,K,2,0,"span",15),o()),n&2){let t,e,a,m,u=d();i(),s("ngIf",(t=u.form.get("nuevaContrasena"))==null||t.errors==null?null:t.errors.required),i(),s("ngIf",(e=u.form.get("nuevaContrasena"))==null||e.errors==null?null:e.errors.minlength),i(),s("ngIf",(a=u.form.get("nuevaContrasena"))==null||a.errors==null?null:a.errors.maxlength),i(),s("ngIf",(m=u.form.get("nuevaContrasena"))==null||m.errors==null?null:m.errors.pattern)}}function X(n,c){n&1&&(r(0,"span"),l(1,"Debe confirmar la contrase\xF1a"),o())}function Y(n,c){n&1&&(r(0,"span"),l(1,"Las contrase\xF1as no coinciden"),o())}function ee(n,c){if(n&1&&(r(0,"div",14),p(1,X,2,0,"span",15)(2,Y,2,0,"span",15),o()),n&2){let t,e,a=d();i(),s("ngIf",(t=a.form.get("confirmarContrasena"))==null||t.errors==null?null:t.errors.required),i(),s("ngIf",(a.form.errors==null?null:a.form.errors.noCoincide)&&((e=a.form.get("confirmarContrasena"))==null?null:e.dirty))}}function ne(n,c){if(n&1&&(r(0,"div",16),l(1),o()),n&2){let t=d();i(),O(t.error)}}function te(n,c){if(n&1){let t=z();r(0,"app-alerts",17),x("cerrar",function(){b(t);let a=d();return M(a.onCerrarAlerta())}),o()}if(n&2){let t=d();s("mensaje",t.mensajeSuccess)("mensajeTitulo",t.tituloSuccess)("tipo","success")}}var W=class n{fb=_(D);route=_(R);router=_(E);recuperarService=_(U);form=this.fb.group({nuevaContrasena:["",[g.required,g.minLength(6),g.maxLength(20),g.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).+$/)]],confirmarContrasena:["",[g.required]]},{validators:[B.contrasenasIguales]});mensajeSuccess=null;tituloSuccess="";error=null;constructor(){this.form.get("nuevaContrasena")?.valueChanges.subscribe(()=>{this.form.updateValueAndValidity()}),this.form.get("confirmarContrasena")?.valueChanges.subscribe(()=>{this.form.updateValueAndValidity()})}onSubmit(){if(this.form.valid){let c=this.route.snapshot.queryParamMap.get("token");if(!c){this.error="Token inv\xE1lido o expirado.";return}let t={nuevaContrasena:this.form.value.nuevaContrasena};this.recuperarService.finalizarRecuperacion(c,t).subscribe({next:e=>{this.mensajeSuccess=e.mensaje,this.tituloSuccess="\xC9xito"},error:e=>{this.error="No se pudo cambiar la contrase\xF1a."}})}}onCerrarAlerta(){this.mensajeSuccess=null,this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=h({type:n,selectors:[["app-finalizar-recuperacion"]],decls:25,vars:12,consts:[[1,"finalizar-recuperacion-container"],[1,"circle"],["src","/assets/icons/loginIcon.svg","alt","Login Icon"],[3,"ngSubmit","formGroup"],["for","nuevaContrasena"],[1,"required"],["id","nuevaContrasena","type","password","formControlName","nuevaContrasena","placeholder","Ingrese su nueva contrase\xF1a","required",""],["class","error-messages",4,"ngIf"],["for","confirmarContrasena"],["id","confirmarContrasena","type","password","formControlName","confirmarContrasena","placeholder","Confirme su nueva contrase\xF1a","required",""],["type","submit",3,"disabled"],[3,"routerLink"],["class","error-message",4,"ngIf"],[3,"mensaje","mensajeTitulo","tipo"],[1,"error-messages"],[4,"ngIf"],[1,"error-message"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(t,e){if(t&1&&(r(0,"section")(1,"div",0)(2,"div",1),C(3,"img",2),o(),r(4,"h2"),l(5,"Restablecer Contrase\xF1a"),o(),r(6,"form",3),x("ngSubmit",function(){return e.onSubmit()}),r(7,"label",4),l(8,"Nueva contrase\xF1a "),r(9,"span",5),l(10,"*"),o()(),C(11,"input",6),p(12,Q,5,4,"div",7),r(13,"label",8),l(14,"Confirmar contrase\xF1a "),r(15,"span",5),l(16,"*"),o()(),C(17,"input",9),p(18,ee,3,2,"div",7),r(19,"button",10),l(20,"Cambiar Contrase\xF1a"),o(),r(21,"a",11),l(22,"Volver al inicio de sesi\xF3n"),o()(),p(23,ne,2,1,"div",12),o()(),p(24,te,1,3,"app-alerts",13)),t&2){let a,m,u,f;i(6),s("formGroup",e.form),i(5),v("invalid",((a=e.form.get("nuevaContrasena"))==null?null:a.touched)&&((a=e.form.get("nuevaContrasena"))==null?null:a.invalid)),i(),s("ngIf",((m=e.form.get("nuevaContrasena"))==null?null:m.touched)&&((m=e.form.get("nuevaContrasena"))==null?null:m.invalid)),i(5),v("invalid",((u=e.form.get("confirmarContrasena"))==null?null:u.touched)&&(((u=e.form.get("confirmarContrasena"))==null?null:u.invalid)||(e.form.errors==null?null:e.form.errors.noCoincide)&&((u=e.form.get("confirmarContrasena"))==null?null:u.dirty))),i(),s("ngIf",((f=e.form.get("confirmarContrasena"))==null?null:f.touched)&&(((f=e.form.get("confirmarContrasena"))==null?null:f.invalid)||(e.form.errors==null?null:e.form.errors.noCoincide)&&((f=e.form.get("confirmarContrasena"))==null?null:f.dirty))),i(),s("disabled",e.form.invalid),i(2),s("routerLink",F(11,Z)),i(2),s("ngIf",e.error),i(),P(e.mensajeSuccess?24:-1)}},dependencies:[L,k,j,w,V,N,q,A,y,S,G,T,I],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background:#16697a;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}.finalizar-recuperacion-container[_ngcontent-%COMP%]{background:#82c0cc;padding:60px 30px 40px;border-radius:10px;box-shadow:0 4px 12px #0000001a;width:320px;text-align:center;position:relative}.finalizar-recuperacion-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#ffa21f;border-radius:50%;position:absolute;top:-30px;left:50%;transform:translate(-50%);border:3px solid #82C0CC;display:flex;justify-content:center;align-items:center}.finalizar-recuperacion-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px}.finalizar-recuperacion-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.5em;color:#000}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:left;font-size:14px;margin-top:10px;margin-bottom:5px;color:#000}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:10px;font-size:14px;transition:border .3s}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#e74c3c;outline:none}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#ffa21f;color:#000;border:none;border-radius:20px;cursor:pointer;margin-top:10px;font-weight:700;transition:background-color .3s}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eb8900}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;color:#000;text-decoration:none}.finalizar-recuperacion-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f"}']})};export{W as FinalizarRecuperacionComponent};
