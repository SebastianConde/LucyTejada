import{a as f}from"./chunk-S4FW5EPH.js";import{a as W}from"./chunk-2BIVZGSJ.js";import{a as X}from"./chunk-ZXJOWMYM.js";import{a as V,b as g,c as U,d as z,g as D,i as G,j as H,k as L,l as B,m as J,p as K,r as Q}from"./chunk-XOECQB7D.js";import"./chunk-UYWN3LPP.js";import{b as q,h as A,l as k}from"./chunk-VTUWB4KY.js";import{$a as i,Ca as j,Db as w,Eb as N,Ga as m,M as y,Na as c,Oa as d,Qa as n,Ra as o,S as p,Sa as _,Va as T,Wa as S,Xa as u,Y as R,Z as I,ta as s}from"./chunk-UYD3PI4J.js";var F=class t{getHeader=p(X);http=p(q);baseUrl="http://localhost:8080/api/lucyTejada/registrar";registrarUsuario(l){return this.http.post(this.baseUrl,l,{headers:this.getHeader.getHeaders()})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};function $(t,l){t&1&&(n(0,"span"),i(1,"El nombre es obligatorio."),o())}function ee(t,l){t&1&&(n(0,"span"),i(1,"El nombre no puede ser solo espacios en blanco."),o())}function te(t,l){if(t&1&&(n(0,"div",24),m(1,$,2,0,"span",25)(2,ee,2,0,"span",25),o()),t&2){let r,e,a=u();s(),c("ngIf",(r=a.registerForm.get("nombres"))==null?null:r.hasError("required")),s(),c("ngIf",(e=a.registerForm.get("nombres"))==null?null:e.hasError("soloEspacios"))}}function ne(t,l){t&1&&(n(0,"span"),i(1,"Los apellidos son obligatorios."),o())}function oe(t,l){t&1&&(n(0,"span"),i(1,"Los apellidos no pueden ser solo espacios en blanco."),o())}function re(t,l){if(t&1&&(n(0,"div",24),m(1,ne,2,0,"span",25)(2,oe,2,0,"span",25),o()),t&2){let r,e,a=u();s(),c("ngIf",(r=a.registerForm.get("apellidos"))==null?null:r.hasError("required")),s(),c("ngIf",(e=a.registerForm.get("apellidos"))==null?null:e.hasError("soloEspacios"))}}function ie(t,l){t&1&&(n(0,"span"),i(1,"La c\xE9dula es obligatoria."),o())}function le(t,l){t&1&&(n(0,"span"),i(1,"La c\xE9dula debe tener entre 8 a 10 d\xEDgitos."),o())}function se(t,l){if(t&1&&(n(0,"div",24),m(1,ie,2,0,"span",25)(2,le,2,0,"span",25),o()),t&2){let r,e,a=u();s(),c("ngIf",(r=a.registerForm.get("cedula"))==null?null:r.hasError("required")),s(),c("ngIf",(e=a.registerForm.get("cedula"))==null?null:e.hasError("cedulaInvalida"))}}function ae(t,l){t&1&&(n(0,"span"),i(1,"El correo electr\xF3nico es obligatorio."),o())}function ce(t,l){t&1&&(n(0,"span"),i(1,"El correo no tiene un formato permitido."),o())}function me(t,l){if(t&1&&(n(0,"div",24),m(1,ae,2,0,"span",25)(2,ce,2,0,"span",25),o()),t&2){let r,e,a=u();s(),c("ngIf",(r=a.registerForm.get("correoElectronico"))==null?null:r.hasError("required")),s(),c("ngIf",(e=a.registerForm.get("correoElectronico"))==null?null:e.hasError("correoInvalido"))}}function pe(t,l){t&1&&(n(0,"div",24)(1,"span"),i(2,"El rol es obligatorio."),o()())}function ue(t,l){if(t&1){let r=T();n(0,"app-alerts",26),S("cerrar",function(){R(r);let a=u();return I(a.mensajeSuccess=null)}),o()}if(t&2){let r=u();c("mensaje",r.mensajeSuccess)("mensajeTitulo",r.tituloSuccess)("tipo",r.tituloSuccess==="\xC9xito"?"success":"error")}}var Y=class t{fb=p(K);service=p(F);router=p(A);mensajeSuccess=null;tituloSuccess="";tipoAlerta="success";registerForm=this.fb.group({nombres:["",[g.required,f.noSoloEspacios]],apellidos:["",[g.required,f.noSoloEspacios]],cedula:["",[g.required,f.cedulaValida]],correoElectronico:["",[g.required,g.email,f.correoPersonalizado]],rol:["",[g.required]]});onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let l=this.registerForm.value,r={nombres:l.nombres,apellidos:l.apellidos,cedula:l.cedula,correoElectronico:l.correoElectronico,rol:l.rol,contrasena:null,fechaNacimiento:null,direccion:null,telefono:null,sexo:null,tipoSangre:null};this.service.registrarUsuario(r).subscribe({next:()=>{this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess="Usuario creado exitosamente.",this.registerForm.reset()},error:e=>{this.tipoAlerta="error",this.tituloSuccess="Error",e.status===403?this.mensajeSuccess="No tiene permisos para realizar esta acci\xF3n.":e.status===409?this.mensajeSuccess="El correo electr\xF3nico o c\xE9dula ya est\xE1n registrados.":e.status===200?(this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess="Usuario creado exitosamente.",this.registerForm.reset()):(this.tipoAlerta="success",this.tituloSuccess="\xC9xito",this.mensajeSuccess="Usuario creado exitosamente.",this.registerForm.reset()),console.error("Error en el registro:",e)}})}cancelar(){this.router.navigate(["principal-web/usuarios"])}onCerrarAlerta(){this.mensajeSuccess=null,this.tituloSuccess=""}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=j({type:t,selectors:[["app-registro"]],decls:55,vars:18,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","nombres"],[1,"required"],["id","nombres","type","text","formControlName","nombres"],["class","error-messages",4,"ngIf"],["for","apellidos"],["id","apellidos","type","text","formControlName","apellidos"],["for","cedula"],["id","cedula","type","text","formControlName","cedula"],["for","correoElectronico"],["id","correoElectronico","type","email","formControlName","correoElectronico"],[1,"form-group","full-width"],["for","rol"],["id","rol","formControlName","rol"],["value",""],["value","Coordinador"],["value","Instructor"],[1,"form-actions"],["type","button",3,"click"],["type","submit",3,"disabled"],[3,"mensaje","mensajeTitulo","tipo","cerrar",4,"ngIf"],[1,"error-messages"],[4,"ngIf"],[3,"cerrar","mensaje","mensajeTitulo","tipo"]],template:function(r,e){if(r&1&&(n(0,"section")(1,"div",0)(2,"h2"),i(3,"Registrar Usuario"),o(),n(4,"form",1),S("ngSubmit",function(){return e.onSubmit()}),n(5,"div",2)(6,"div",3)(7,"label",4),i(8,"Nombres "),n(9,"span",5),i(10,"*"),o()(),_(11,"input",6),m(12,te,3,2,"div",7),o(),n(13,"div",3)(14,"label",8),i(15,"Apellidos "),n(16,"span",5),i(17,"*"),o()(),_(18,"input",9),m(19,re,3,2,"div",7),o()(),n(20,"div",2)(21,"div",3)(22,"label",10),i(23,"C\xE9dula "),n(24,"span",5),i(25,"*"),o()(),_(26,"input",11),m(27,se,3,2,"div",7),o(),n(28,"div",3)(29,"label",12),i(30,"Correo electr\xF3nico "),n(31,"span",5),i(32,"*"),o()(),_(33,"input",13),m(34,me,3,2,"div",7),o()(),n(35,"div",2)(36,"div",14)(37,"label",15),i(38,"Rol "),n(39,"span",5),i(40,"*"),o()(),n(41,"select",16)(42,"option",17),i(43,"Seleccione un rol"),o(),n(44,"option",18),i(45,"Coordinador"),o(),n(46,"option",19),i(47,"Instructor"),o()(),m(48,pe,3,0,"div",7),o()(),n(49,"div",20)(50,"button",21),S("click",function(){return e.cancelar()}),i(51,"Cancelar"),o(),n(52,"button",22),i(53,"Registrar"),o()()()()(),m(54,ue,1,3,"app-alerts",23)),r&2){let a,C,v,b,P,M,O,x,h,E;s(4),c("formGroup",e.registerForm),s(7),d("invalid",((a=e.registerForm.get("nombres"))==null?null:a.touched)&&((a=e.registerForm.get("nombres"))==null?null:a.invalid)),s(),c("ngIf",((C=e.registerForm.get("nombres"))==null?null:C.touched)&&((C=e.registerForm.get("nombres"))==null?null:C.invalid)),s(6),d("invalid",((v=e.registerForm.get("apellidos"))==null?null:v.touched)&&((v=e.registerForm.get("apellidos"))==null?null:v.invalid)),s(),c("ngIf",((b=e.registerForm.get("apellidos"))==null?null:b.touched)&&((b=e.registerForm.get("apellidos"))==null?null:b.invalid)),s(7),d("invalid",((P=e.registerForm.get("cedula"))==null?null:P.touched)&&((P=e.registerForm.get("cedula"))==null?null:P.invalid)),s(),c("ngIf",((M=e.registerForm.get("cedula"))==null?null:M.touched)&&((M=e.registerForm.get("cedula"))==null?null:M.invalid)),s(6),d("invalid",((O=e.registerForm.get("correoElectronico"))==null?null:O.touched)&&((O=e.registerForm.get("correoElectronico"))==null?null:O.invalid)),s(),c("ngIf",((x=e.registerForm.get("correoElectronico"))==null?null:x.touched)&&((x=e.registerForm.get("correoElectronico"))==null?null:x.invalid)),s(7),d("invalid",((h=e.registerForm.get("rol"))==null?null:h.touched)&&((h=e.registerForm.get("rol"))==null?null:h.invalid)),s(7),c("ngIf",((E=e.registerForm.get("rol"))==null?null:E.touched)&&((E=e.registerForm.get("rol"))==null?null:E.invalid)),s(4),c("disabled",e.registerForm.invalid),s(2),c("ngIf",e.mensajeSuccess)}},dependencies:[N,w,Q,D,B,J,V,L,U,z,G,H,k,W],styles:['@charset "UTF-8";section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:Arial,sans-serif;padding:1rem}.registro-container[_ngcontent-%COMP%]{padding:40px 30px;width:100%;max-width:600px}.registro-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:30px;color:#000;text-align:center}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:.9rem;text-align:left;margin-bottom:5px;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red;font-weight:400;font-size:12px;margin-left:5px}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:8px;font-size:.9rem;transition:border .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1 1 100%}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#ffa21f;color:#000}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#eb8900}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.registro-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#d32f2f}.error-messages[_ngcontent-%COMP%]{margin-top:.5rem;color:#e74c3c;font-size:.875rem;font-weight:500}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;padding-left:1.2rem;position:relative}.error-messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\26a0\\fe0f";position:absolute;left:0}']})};export{Y as RegistroComponent};
